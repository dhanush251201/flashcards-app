import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { Link } from "react-router-dom";
import { Bars3Icon, BellIcon } from "@heroicons/react/24/outline";
import { ThemeToggle } from "@/components/navigation/ThemeToggle";
import { SidebarNav } from "@/components/navigation/SidebarNav";
import { useAuth } from "@/hooks/useAuth";
import { useStreak } from "@/hooks/useStreak";
export const AppShell = ({ children }) => {
    const [mobileOpen, setMobileOpen] = useState(false);
    const { user, logout } = useAuth();
    const { data: streakData } = useStreak();
    return (_jsxs("div", { className: "flex min-h-screen bg-slate-100/80 text-slate-900 transition-colors dark:bg-slate-950 dark:text-slate-50", children: [_jsxs("aside", { className: `fixed inset-y-0 left-0 z-40 w-72 transform border-r border-slate-200 bg-white/90 px-6 py-8 shadow-xl shadow-brand-500/5 backdrop-blur-lg transition-transform duration-300 dark:border-slate-800 dark:bg-slate-900/90 lg:static lg:translate-x-0 ${mobileOpen ? "translate-x-0" : "-translate-x-full"}`, children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx(Link, { to: "/app/dashboard", className: "text-lg font-semibold text-slate-900 dark:text-white", children: "Flash-Decks" }), _jsx("button", { className: "rounded-full border border-slate-200 p-1 text-slate-500 transition hover:text-brand-600 dark:border-slate-700 dark:text-slate-300 lg:hidden", onClick: () => setMobileOpen(false), type: "button", "aria-label": "Close navigation", children: "\u2715" })] }), _jsx("div", { className: "mt-8", children: _jsx(SidebarNav, {}) })] }), _jsxs("div", { className: "flex min-h-screen w-full flex-col", children: [_jsx("header", { className: "sticky top-0 z-30 border-b border-slate-200/70 bg-white/80 px-4 py-4 sm:px-6 lg:px-12 backdrop-blur-lg dark:border-slate-800/80 dark:bg-slate-950/70", children: _jsxs("div", { className: "flex flex-wrap items-center justify-between gap-4", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("button", { className: "flex size-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 shadow-sm transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300 lg:hidden", type: "button", onClick: () => setMobileOpen((prev) => !prev), "aria-label": "Open navigation", children: _jsx(Bars3Icon, { className: "size-5" }) }), _jsxs("div", { className: "hidden text-sm text-slate-500 dark:text-slate-400 lg:block", children: [_jsxs("p", { className: "font-semibold text-slate-800 dark:text-white", children: ["Welcome back", user?.full_name ? `, ${user.full_name}` : ""] }), _jsx("span", { children: "Stay consistent and your streak will thrive." })] })] }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsxs("div", { className: "relative hidden items-center rounded-full border border-slate-200 bg-white px-3 py-2 text-sm text-slate-500 shadow-sm dark:border-slate-700 dark:bg-slate-900 sm:flex", children: [_jsx("span", { className: "text-xs uppercase tracking-wider text-slate-400", children: "Streak" }), _jsxs("span", { className: "ml-2 text-base font-semibold text-brand-600 dark:text-brand-300", children: [streakData?.current_streak ?? 0, " \uD83D\uDD25"] })] }), _jsxs("button", { className: "relative flex size-10 items-center justify-center rounded-full bg-white text-slate-500 shadow-card transition hover:text-brand-600 dark:bg-slate-900 dark:text-slate-300", children: [_jsx(BellIcon, { className: "size-5" }), _jsx("span", { className: "absolute -top-1 -right-1 inline-flex size-4 items-center justify-center rounded-full bg-rose-500 text-[10px] text-white", children: "3" })] }), _jsx(ThemeToggle, {}), _jsx("div", { className: "flex items-center gap-3 rounded-full bg-white px-3 py-2 text-sm shadow-card dark:bg-slate-900", children: _jsxs("div", { children: [_jsx("p", { className: "font-semibold text-slate-800 dark:text-white", children: user?.full_name ?? user?.email }), _jsx("button", { type: "button", onClick: () => {
                                                            logout().catch(() => {
                                                                // Silently ignore logout errors for UX; session will clear on next login attempt.
                                                            });
                                                        }, className: "text-xs font-medium text-brand-600 hover:text-brand-500 dark:text-brand-300", children: "Log out" })] }) })] })] }) }), _jsx("main", { className: "flex-1 bg-slate-100/60 px-4 py-8 sm:px-6 lg:px-12 dark:bg-slate-950", children: _jsx("div", { className: "mx-auto flex w-full max-w-7xl flex-col space-y-10", children: children }) })] })] }));
};
